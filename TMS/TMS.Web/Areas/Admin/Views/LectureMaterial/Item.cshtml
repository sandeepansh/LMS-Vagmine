@model TMS.ViewModels.Masters.LectureMaterialViewModel
@{
    ViewData["Title"] = "Lecture Material";
}

 

<form asp-action="Item" method="post" enctype="multipart/form-data">
    <input type="hidden" asp-for="Id" />
    <input type="hidden" asp-for="FilePath" />

    <!-- Course -->
    <div class="mb-3">
        <label asp-for="CourseId" class="form-label">Course</label>
        <select asp-for="CourseId" class="form-select">
            <option value="">-- Select Course --</option>
            @if (ViewBag.CourseId != null)
            {
                var courses = (IEnumerable<TMS.ViewModels.Masters.CourseMasterViewModel>)ViewBag.CourseId;
                foreach (var course in courses)
                {
                    if (course.Id == Model.CourseId)
                    {
                        <option value="@course.Id" selected>@course.Name</option>
                    }
                    else
                    {
                        <option value="@course.Id">@course.Name</option>
                    }
                }
            }
        </select>
        <span asp-validation-for="CourseId" class="text-danger"></span>
    </div>

    <!-- Material Type -->
    <div class="mb-3">
        <label asp-for="MaterialType" class="form-label">Material Type</label>
        <select asp-for="MaterialType" class="form-select" id="MaterialType">
            <option value="">-- Select Material Type --</option>
            <option value="Video" selected="@(Model.MaterialType == "Video" ? "selected" : null)">Video</option>
            <option value="Document" selected="@(Model.MaterialType == "Document" ? "selected" : null)">Document</option>
            <option value="VideoURL" selected="@(Model.MaterialType == "VideoURL" ? "selected" : null)">Video URL</option>
        </select>
        <span asp-validation-for="MaterialType" class="text-danger"></span>
    </div>

    <!-- Quadrant -->
    <div class="mb-3">
        <label asp-for="CourseQuadrantId" class="form-label">Quadrant</label>
        <select asp-for="CourseQuadrantId" class="form-select">
            <option value="">-- Select Quadrant --</option>
            @if (ViewBag.QuadrantId != null)
            {
                var quadrants = (IEnumerable<TMS.ViewModels.Masters.CourseQuadrantViewModel>)ViewBag.QuadrantId;
                foreach (var q in quadrants)
                {
                    if (q.Id == Model.CourseQuadrantId)
                    {
                        <option value="@q.Id" selected>@q.Name</option>
                    }
                    else
                    {
                        <option value="@q.Id">@q.Name</option>
                    }
                }
            }
        </select>
        <span asp-validation-for="CourseQuadrantId" class="text-danger"></span>
    </div>

    <!-- Title -->
    <div class="mb-3">
        <label asp-for="Title" class="form-label">Title</label>
        <input asp-for="Title" class="form-control" />
        <span asp-validation-for="Title" class="text-danger"></span>
    </div>

    <!-- Upload File -->
    <div class="mb-3" id="uploadSection">
        <label class="form-label">Upload File</label>
        <input type="file" name="uploadFile" class="form-control" />
        @if (!string.IsNullOrEmpty(Model.FilePath))
        {
            <p class="mt-2">
                Current File: <a href="@Model.FilePath" target="_blank">View</a>
            </p>
        }
    </div>

    <!-- Video URL -->
    <div class="mb-3" id="videoUrlSection" style="display:none;">
        <label asp-for="ContentPath" class="form-label">Video URL</label>
        <input asp-for="ContentPath" class="form-control" placeholder="Enter Video URL" />
        <span asp-validation-for="ContentPath" class="text-danger"></span>
    </div>
    @if(Model.Id>0)
    {
       <!-- Active Checkbox -->
    <div class="mb-3">
        <div class="form-check">
            <input asp-for="IsActive" class="form-check-input" />
            <label asp-for="IsActive" class="form-check-label">Active</label>
        </div>
    </div> 
    }
    

    <button type="submit" class="btn btn-primary">Save</button>
    <a href="@Url.Action("Index")" class="btn btn-secondary">Cancel</a>
</form>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />

    <script>
        $(document).ready(function () {
            function toggleSections() {
                var type = $("#MaterialType").val();

                if (type === "VideoURL") {
                    $("#uploadSection").hide();
                    $("#videoUrlSection").show();
                } else if (type === "Video" || type === "Document") {
                    $("#uploadSection").show();
                    $("#videoUrlSection").hide();
                } else {
                    $("#uploadSection").hide();
                    $("#videoUrlSection").hide();
                }
            }

            // Initial check (for edit mode)
            toggleSections();

            // On change event
            $("#MaterialType").change(toggleSections);
        });
    </script>
}
